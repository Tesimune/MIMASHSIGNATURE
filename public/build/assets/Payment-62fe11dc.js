import{r,j as e,a as k,d as K}from"./app-44938ad7.js";import{P as A}from"./PageLayout-8d0cfcec.js";import B from"./ConfirmToPay-c973a033.js";import"./ApplicationLogo-b7797631.js";import"./iconBase-09b3de97.js";import"./index.esm-24afa5ec.js";import"./transition-38b1d576.js";import"./Modal-2bcbb0cc.js";import"./index.esm-4a62ceb0.js";function V({auth:n,store:j,orderPickupPrices:i,paystack_pub:_}){const[x,E]=r.useState([]),[N,O]=r.useState(!1),[h,w]=r.useState(),[t,v]=r.useState({state:"Kaduna",price:"1000"}),[T,y]=r.useState([]);r.useEffect(()=>{var s,d,b;const l=JSON.parse(localStorage.getItem("cart"))||[];E(l),i.length>0&&(w((s=i[0])==null?void 0:s.state),y(((d=i[0])==null?void 0:d.location_and_price)||[]),v(((b=i[0])==null?void 0:b.location_and_price[0])||{}))},[i]);const o=()=>x.reduce((l,s)=>l+s.quantity*(s.selling_price-s.discount),0),C=100,g=o()+Number(t==null?void 0:t.price)+Number(C),p=(l=>{const s=.015*l,d=100;return l<2500?1.5/100*l:Math.min(s+d,2e3)})(g)+Number(C),f=o()+Number(t==null?void 0:t.price)+p,[c,m]=r.useState({name:n.user.name??"",email:n.user.email??"",tel:n.user.tel??"",address:n.user.address??"",country:"Nigeria",state:h,delivery:t}),[a,u]=r.useState({name:n.user.name??"",email:n.user.email??"",tel:n.user.tel??"",address:n.user.address??"",country:"Nigeria",state:h,delivery:t}),[D,S]=r.useState(!1),[q,F]=r.useState({total_price:o(),SubtotalToDisplay:f,SubtotalToPay:g,charges:p,orderFrom:c,orderTo:a,description:"",content:x}),J=l=>{l.preventDefault(),F({total_price:o(),SubtotalToDisplay:f,SubtotalToPay:g,charges:p,orderFrom:c,orderTo:a,description:"",content:x}),S(!0)};return e.jsxs(A,{children:[e.jsx(k,{title:"Payment"}),e.jsx(B,{store:j,open:D,setOpen:S,paystack_pub:_,orderData:q}),e.jsx("div",{className:"sm:flex sm:justify-center min-h-screen w-full bg-dots-darker bg-center bg-gray-100 selection:bg-gold selection:text-white relative",children:e.jsx("div",{className:"container mx-auto p-6 lg:p-8",children:e.jsx("div",{className:"flex max-w-7xl p-2 md:p-5 md:mx-9",children:e.jsxs("div",{className:"grid gap-3 h-full w-full",children:[e.jsx("h3",{className:"text-center text-4xl font-bold",children:"Order Summary"}),e.jsxs("form",{onSubmit:J,className:"bg-gray-50 h-full w-full p-3 md:p-5",children:[e.jsxs("div",{className:"grid lg:flex mb-6",children:[e.jsxs("div",{className:"p-3 my-3 lg:my-0 lg:mx-3 w-full border rounded-md",children:[e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Name?"})}),e.jsx("input",{type:"name",onChange:l=>m({...a,name:l.target.value}),value:c.name,placeholder:"John Doe",className:"input input-bordered bg-white text-slate-700 w-full",required:!0})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Email?"})}),e.jsx("input",{type:"email",onChange:l=>m({...a,email:l.target.value}),value:c.email,placeholder:"Email",className:"input input-bordered bg-white text-slate-700 w-full",required:!0})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Tel?"})}),e.jsx("input",{type:"tel",onChange:l=>m({...a,tel:l.target.value}),value:c.tel,placeholder:"08000000000",className:"input input-bordered bg-white text-slate-700 w-full"})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Address?"})}),e.jsx("input",{type:"text",onChange:l=>m({...a,address:l.target.value}),value:c.address,placeholder:"No:12 Kaduna, Kaduna",className:"input input-bordered bg-white text-slate-700 w-full"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Send As Gift?"})}),e.jsx("input",{type:"checkbox",onChange:l=>O(!N)})]})]}),N&&e.jsxs("div",{className:"p-3 my-3 lg:my-0 lg:mx-3 w-full border rounded-md",children:[e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Name?"})}),e.jsx("input",{type:"name",onChange:l=>u({...a,name:l.target.value}),value:a.name,placeholder:"John Doe",className:"input input-bordered bg-white text-slate-700 w-full",required:!0})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Email?"})}),e.jsx("input",{type:"email",onChange:l=>u({...a,email:l.target.value}),value:a.email,placeholder:"Email",className:"input input-bordered bg-white text-slate-700 w-full",required:!0})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Tel?"})}),e.jsx("input",{type:"tel",onChange:l=>u({...a,tel:l.target.value}),value:a.tel,placeholder:"08000000000",className:"input input-bordered bg-white text-slate-700 w-full"})]}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Address?"})}),e.jsx("input",{type:"text",onChange:l=>u({...a,address:l.target.value}),value:a.address,placeholder:"No:12 Kaduna, Kaduna",className:"input input-bordered bg-white text-slate-700 w-full"})]})]})]}),e.jsxs("div",{className:"grid lg:flex gap-5 py-3",children:[e.jsxs("div",{className:"grid w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Country?"})}),e.jsx("input",{type:"text",onChange:l=>m({...c,country:l.target.value}),value:"Nigeria",placeholder:"Nigeria",className:"input input-bordered bg-white text-slate-700 w-full"})]}),e.jsxs("div",{className:"grid w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"State?"})}),e.jsxs("div",{className:"grid lg:flex gap-5",children:[e.jsx("select",{onChange:l=>{w(l.target.value);const s=i.find(d=>d.state===l.target.value);y(s?s.location_and_price:[]),u({...a,state:l.target.value})},value:h,className:"input input-bordered bg-white text-slate-700 w-full",children:i.map(l=>e.jsx("option",{value:l.state,children:l.state},l.id))}),e.jsx("select",{onChange:l=>v(JSON.parse(l.target.value)),value:JSON.stringify(t),className:"input input-bordered bg-white text-slate-700 w-full",children:T.map((l,s)=>e.jsxs("option",{value:JSON.stringify({location:l.location,price:l.price}),children:[l.location," - ₦",l.price]},s))})]})]})]}),e.jsx("div",{className:"bg-white w-full border rounded-md",children:e.jsxs("div",{className:"flex flex-col justify-between h-full w-full",children:[e.jsx("div",{className:"w-full p-3 md:p-5",children:x.map((l,s)=>e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{children:l.name}),e.jsxs("span",{children:[l.quantity," × ₦",l.selling_price-l.discount]})]},s))}),e.jsx("div",{className:"grid items-end w-full border-t",children:e.jsxs("div",{className:"grid items-end w-full p-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-1 w-full",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["₦",o()]})]}),e.jsxs("div",{className:"flex justify-between p-1 w-full",children:[e.jsx("span",{children:"Delivery:"}),e.jsxs("span",{children:["₦",t==null?void 0:t.price]})]}),e.jsxs("div",{className:"flex justify-between p-1 w-full",children:[e.jsx("span",{children:"Charges:"}),e.jsxs("span",{children:["₦",p]})]}),e.jsxs("div",{className:"flex justify-between p-1 w-full",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["₦",f]})]})]})})]})}),e.jsx("div",{className:"flex md:justify-end w-full py-3",children:e.jsxs("div",{className:"grid md:flex md:flex-row-reverse gap-3 w-full",children:[e.jsx("button",{className:"btn btn-primary w-full md:w-fit bg-gold hover:bg-gold/90 text-white",children:"Submit"}),e.jsx(K,{href:route("cart",j.username),className:"btn btn-primary w-full md:w-fit bg-black hover:bg-black/90 text-white",children:"Back to cart"})]})})]})]})})})}),e.jsx("style",{children:`
                .bg-dots-darker {
                    background-image: url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.22676 0C1.91374 0 2.45351 0.539773 2.45351 1.22676C2.45351 1.91374 1.91374 2.45351 1.22676 2.45351C0.539773 2.45351 0 1.91374 0 1.22676C0 0.539773 0.539773 0 1.22676 0Z' fill='rgba(0,0,0,0.07)'/%3E%3C/svg%3E");
                }
                @media (prefers-color-scheme: dark) {
                    .dark\\:bg-dots-lighter {
                        background-image: url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1.22676 0C1.91374 0 2.45351 0.539773 2.45351 1.22676C2.45351 1.91374 1.91374 2.45351 1.22676 2.45351C0.539773 2.45351 0 1.91374 0 1.22676C0 0.539773 0.539773 0 1.22676 0Z' fill='rgba(255,255,255,0.07)'/%3E%3C/svg%3E");
                    }
                }
            `})]})}export{V as default};
